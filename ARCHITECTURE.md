# üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã —Ç–æ—Ä–≥–æ–≤—ã—Ö –±–æ—Ç–æ–≤

## üìã –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

–≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ = –µ–¥–∏–Ω—ã–π "–º–æ–∑–≥" + —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–æ—Ç—ã-–æ—Ä–≥–∞–Ω—ã

**–ü—Ä–∏–Ω—Ü–∏–ø—ã:**
1. ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –ú—ã—à–ª–µ–Ω–∏–µ ‚â† –°–∏–≥–Ω–∞–ª—ã ‚â† –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
2. ‚úÖ **Decision First** - —Å–Ω–∞—á–∞–ª–∞ "–º–æ–∂–Ω–æ –ª–∏", –ø–æ—Ç–æ–º "—á—Ç–æ –∏–º–µ–Ω–Ω–æ"
3. ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - –±–æ—Ç—ã –Ω–µ –∂–¥—É—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
market_bot/
‚îú‚îÄ‚îÄ core/                    # Decision Core - —Å–µ—Ä–¥—Ü–µ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îî‚îÄ‚îÄ decision_core.py    # –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ brains/                  # –ë–æ—Ç—ã "–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º—ã—à–ª–µ–Ω–∏—è" (–ù–ï –¥–∞—é—Ç —Å–∏–≥–Ω–∞–ª–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ market_regime_brain.py      # –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞ (trend/range, volatility, risk-on/off)
‚îÇ   ‚îú‚îÄ‚îÄ risk_exposure_brain.py      # –†–∏—Å–∫ –∏ —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ cognitive_filter.py         # –§–∏–ª—å—Ç—Ä —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ opportunity_awareness.py    # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
‚îÇ
‚îú‚îÄ‚îÄ signals/                 # –¢—Ä–µ–π–¥–∏–Ω–≥-–±–æ—Ç—ã (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏)
‚îÇ   ‚îî‚îÄ‚îÄ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤)
‚îÇ
‚îú‚îÄ‚îÄ execution/               # Execution Layer
‚îÇ   ‚îî‚îÄ‚îÄ gatekeeper.py       # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
‚îÇ
‚îî‚îÄ‚îÄ utils/                   # –£—Ç–∏–ª–∏—Ç—ã
```

---

## üß† Decision Core

**–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π**

### –ö–æ–º–∞–Ω–¥—ã:
- `/should_i_trade [symbol]` - –ú–æ–∂–Ω–æ –ª–∏ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å?
- `/risk_status` - –°—Ç–∞—Ç—É—Å —Ä–∏—Å–∫–∞ –∏ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏
- `/invest [—Å—É–º–º–∞]` - –ê–Ω–∞–ª–∏–∑ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
1. –°–æ–±–∏—Ä–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Å–µ—Ö "–º–æ–∑–≥–æ–≤"
2. –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
3. –í—ã–¥–∞—ë—Ç —Ä–µ—à–µ–Ω–∏–µ, –∞ –Ω–µ –º–Ω–µ–Ω–∏–µ

### –í—ã—Ö–æ–¥:
- `can_trade: bool` - –ú–æ–∂–Ω–æ –ª–∏ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å
- `reason: str` - –ü—Ä–∏—á–∏–Ω–∞ —Ä–µ—à–µ–Ω–∏—è
- `risk_level: str` - –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞
- `max_position_size: float` - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
- `max_leverage: float` - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø–ª–µ—á–æ
- `recommendations: List[str]` - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

---

## üß† –ë–æ—Ç—ã "–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º—ã—à–ª–µ–Ω–∏—è"

### 1. Market Regime Brain

**–í–æ–ø—Ä–æ—Å:** –í –∫–∞–∫–æ–º —Ä—ã–Ω–∫–µ –º—ã —Å–µ–π—á–∞—Å –∂–∏–≤—ë–º?

**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç:**
- `trend_type`: "TREND" | "RANGE"
- `volatility_level`: "HIGH" | "MEDIUM" | "LOW"
- `risk_sentiment`: "RISK_ON" | "RISK_OFF" | "NEUTRAL"
- `macro_pressure`: –º–∞–∫—Ä–æ-–¥–∞–≤–ª–µ–Ω–∏–µ (–ø–æ–∫–∞ None)

**–ù–ï –¥–∞—ë—Ç —Å–∏–≥–Ω–∞–ª–æ–≤**, —Ç–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç.

---

### 2. Risk & Exposure Brain

**–°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –º–æ–¥—É–ª—å**

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:**
- `total_risk_pct`: –°—É–º–º–∞—Ä–Ω—ã–π —Ä–∏—Å–∫ –≤ %
- `max_correlation`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –º–µ–∂–¥—É –ø–æ–∑–∏—Ü–∏—è–º–∏
- `total_leverage`: –°—É–º–º–∞—Ä–Ω–æ–µ –ø–ª–µ—á–æ
- `active_positions`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- `exposure_pct`: –≠–∫—Å–ø–æ–∑–∏—Ü–∏—è –≤ % –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞
- `is_overloaded`: –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è

**–õ–∏–º–∏—Ç—ã:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫: 10%
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è: 50%
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è: 0.8
- –ú–∞–∫—Å–∏–º—É–º –ø–æ–∑–∏—Ü–∏–π: 10

---

### 3. Cognitive Filter Bot

**–§–∏–ª—å—Ç—Ä —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫**

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:**
- `overtrading_score`: –ü–µ—Ä–µ-—Ç–æ—Ä–≥–æ–≤–ª—è (0.0 - 1.0)
- `emotional_entries`: –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤—Ö–æ–¥—ã
- `fomo_patterns`: FOMO –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- `recent_trades_count`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫ –∑–∞ –ø–µ—Ä–∏–æ–¥
- `should_pause`: –ù—É–∂–Ω–∞ –ª–∏ –ø–∞—É–∑–∞

**–õ–∏–º–∏—Ç—ã:**
- –ú–∞–∫—Å–∏–º—É–º —Å–¥–µ–ª–æ–∫ –≤ —á–∞—Å: 3
- –ú–∞–∫—Å–∏–º—É–º —Å–¥–µ–ª–æ–∫ –≤ –¥–µ–Ω—å: 10

---

### 4. Opportunity Awareness Bot

**–ì–æ—Ç–æ–≤–∏—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –Ω–µ —Ç–æ–ª–∫–∞–µ—Ç**

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:**
- `volatility_squeeze`: –°–∂–∞—Ç–∏–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
- `accumulation`: –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ
- `divergence`: –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏–µ/—Ä–µ–∞–∫—Ü–∏—è
- `suspicious_silence`: –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∏—à–∏–Ω–∞
- `readiness_score`: –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Ä—ã–Ω–∫–∞ (0.0 - 1.0)

---

## üö™ Gatekeeper

**–ú–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º**

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–≥–Ω–∞–ª —á–µ—Ä–µ–∑ Decision Core
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–∞
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

---

## üìä –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (candles)
   ‚Üì
2. Market Regime Brain ‚Üí Decision Core
   ‚Üì
3. Risk & Exposure Brain ‚Üí Decision Core
   ‚Üì
4. Cognitive Filter ‚Üí Decision Core
   ‚Üì
5. Opportunity Awareness (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞) ‚Üí Decision Core
   ‚Üì
6. Decision Core: should_i_trade() ‚Üí —Ä–µ—à–µ–Ω–∏–µ
   ‚Üì
7. Signal Bot –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã
   ‚Üì
8. Gatekeeper –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–≥–Ω–∞–ª—ã
   ‚Üì
9. –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—Ç–æ–ª—å–∫–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ)
```

---

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã:
```python
from ecosystem_main import run_ecosystem_cycle
run_ecosystem_cycle()
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Decision Core:
```python
from core.decision_core import get_decision_core

decision_core = get_decision_core()
decision = decision_core.should_i_trade(symbol="BTCUSDT")

if decision.can_trade:
    print(f"–ú–æ–∂–Ω–æ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å: {decision.reason}")
else:
    print(f"–ù–µ–ª—å–∑—è —Ç–æ—Ä–≥–æ–≤–∞—Ç—å: {decision.reason}")
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Gatekeeper:
```python
from execution.gatekeeper import get_gatekeeper

gatekeeper = get_gatekeeper()
if gatekeeper.check_signal("BTCUSDT", signal_data):
    gatekeeper.send_signal(...)
```

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

–°—É—â–µ—Å—Ç–≤—É—é—â–∏–π `main.py` –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º—É:

1. **Signal Bot** - –æ—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å, –Ω–æ —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ Gatekeeper
2. **Post-Signal Watcher** - —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —á–∞—Å—Ç—å—é Execution Layer
3. **Trade Manager** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Risk & Exposure Brain

---

## üìù TODO

- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Signal Bot –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º—É
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å Opportunity Awareness (–¥–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏–∏)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–∞–∫—Ä–æ-–¥–∞–Ω–Ω—ã–µ –≤ Market Regime Brain
- [ ] –£–ª—É—á—à–∏—Ç—å Cognitive Filter (–∞–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–π)
- [ ] –°–æ–∑–¥–∞—Ç—å Strategy Switcher

---

## üé® UX

**–ü—Ä–∏–Ω—Ü–∏–ø—ã:**
- ‚ùå –ù–µ 10 –±–æ—Ç–æ–≤ –≤ —á–∞—Ç–µ
- ‚úÖ –û–¥–∏–Ω —á–∞—Ç + —Ä–æ–ª–∏ –±–æ—Ç–æ–≤
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ Silence-—Ä–µ–∂–∏–º
- ‚úÖ –û–±—ä—è—Å–Ω–µ–Ω–∏—è "–ø–æ—á–µ–º—É"

**–†–æ–ª–∏ –±–æ—Ç–æ–≤ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö:**
- üß† Decision Core - —Ä–µ—à–µ–Ω–∏—è
- üìä Market Regime - —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞
- ‚ö†Ô∏è Risk & Exposure - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- üö™ Gatekeeper - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- üìà Signal Bot - —Å–∏–≥–Ω–∞–ª—ã

